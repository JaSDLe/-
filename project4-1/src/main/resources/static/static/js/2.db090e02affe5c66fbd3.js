webpackJsonp([2],{"08hK":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-container",[a("el-header",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[a("div",{staticStyle:{display:"inline"}},[a("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"请输入课程名或教师姓名",clearable:"",size:"small","prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchTeacherCourse(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:e.searchTeacherCourse}},[e._v("搜索")])],1),e._v(" "),a("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:e.showTeacherCourseView}},[e._v("分配课程")])],1)]),e._v(" "),a("el-main",{staticStyle:{"padding-left":"0px","padding-top":"0px"}},[a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.teacherCourses,border:"",resizable:"",stripe:"",size:"medium"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"index",align:"center",label:" ",width:"38"}}),e._v(" "),a("el-table-column",{attrs:{type:"selection",align:"center",width:"40"}}),e._v(" "),a("el-table-column",{attrs:{prop:"course.course_id",width:"",align:"left","show-overflow-tooltip":"",label:"课程代码"}}),e._v(" "),a("el-table-column",{attrs:{prop:"course.name",width:"","show-overflow-tooltip":"",align:"left",label:"课程名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"teacher.name",width:"","show-overflow-tooltip":"",align:"left",label:"教师姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"teacher.username",width:"",align:"left","show-overflow-tooltip":"",label:"教师用户名"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",align:"center",width:"150","show-overflow-tooltip":"",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"success",icon:"el-icon-search",size:"mini"},on:{click:function(a){return e.loadAllGrade(t.row)}}},[e._v("管理成绩")]),e._v(" "),a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(a){return e.deleteTeacherCourse(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"space-between","margin-top":"10px"}},[e.teacherCourses.length>0?a("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",disabled:0==e.multipleSelection.length},on:{click:e.deleteManyteacherCourses}},[e._v("批量删除")]):e._e(),e._v(" "),a("el-pagination",{attrs:{background:"","page-size":e.pageSize,"page-sizes":[10,5,20,30],"current-page":e.currentPage,layout:"total, prev, pager, next, sizes, jumper",total:e.totalCount},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1)],1)])],1),e._v(" "),a("el-dialog",{staticStyle:{padding:"0px","text-align":"left"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogVisible,"before-close":e.handleDialogClose,width:"740px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-transfer",{staticStyle:{"margin-bottom":"20px"},attrs:{data:e.teachersData,titles:["教师列表","分配列表"],"target-order":"push"},model:{value:e.chosenTeacher,callback:function(t){e.chosenTeacher=t},expression:"chosenTeacher"}}),e._v(" "),a("el-transfer",{staticStyle:{"margin-bottom":"20px"},attrs:{data:e.coursesData,titles:["课程列表","分配列表"],"target-order":"push"},model:{value:e.chosenCourse,callback:function(t){e.chosenCourse=t},expression:"chosenCourse"}}),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.cancelEidt()}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.addTeacherCourse()}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{staticStyle:{padding:"0px","text-align":"left"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.totalGradeDialogVisible,width:"700px"},on:{"update:visible":function(t){e.totalGradeDialogVisible=t}}},[a("div",{staticStyle:{"margin-top":"20px","padding-bottom":"20px"}},[a("div",{staticStyle:{float:"right","margin-bottom":"15px"}},[a("el-button",{attrs:{type:"success",icon:"el-icon-refresh",size:"small"},on:{click:function(t){return e.computeAllGrade()}}},[e._v("更新总成绩")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.gradeTableLoading,expression:"gradeTableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.finalGrades,border:"",resizable:"",stripe:"",size:"medium"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"index",align:"center",label:" ",width:"38"}}),e._v(" "),a("el-table-column",{attrs:{type:"selection",align:"center",width:"40"}}),e._v(" "),a("el-table-column",{attrs:{prop:"student.username",align:"left",label:"学生用户名","show-overflow-tooltip":"",width:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"student.name",width:"",align:"left","show-overflow-tooltip":"",label:"学生姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"finalGrades.regular_grade",width:"",align:"left","show-overflow-tooltip":"",label:"平时成绩"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.regular_grade>=80?a("span",{staticStyle:{"font-weight":"bold",color:"green"}},[e._v(e._s(t.row.regular_grade))]):t.row.regular_grade<60?a("span",{staticStyle:{"font-weight":"bold",color:"red"}},[e._v(e._s(t.row.regular_grade))]):a("span",{staticStyle:{"font-weight":"bold",color:"yellowgreen"}},[e._v(e._s(t.row.regular_grade))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"final_grade",width:"",align:"left","show-overflow-tooltip":"",label:"期末成绩"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.final_grade>=80?a("span",{staticStyle:{"font-weight":"bold",color:"green"}},[e._v(e._s(t.row.final_grade))]):t.row.final_grade<60?a("span",{staticStyle:{"font-weight":"bold",color:"red"}},[e._v(e._s(t.row.final_grade))]):a("span",{staticStyle:{"font-weight":"bold",color:"yellowgreen"}},[e._v(e._s(t.row.final_grade))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"total_grade",width:"",align:"left","show-overflow-tooltip":"",label:"总成绩"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.total_grade>=80?a("span",{staticStyle:{"font-weight":"bold",color:"green"}},[e._v(e._s(t.row.total_grade))]):t.row.total_grade<60?a("span",{staticStyle:{"font-weight":"bold",color:"red"}},[e._v(e._s(t.row.total_grade))]):a("span",{staticStyle:{"font-weight":"bold",color:"yellowgreen"}},[e._v(e._s(t.row.total_grade))])]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center",width:"100","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"warning",icon:"el-icon-edit",size:"mini"},on:{click:function(a){return e.showEditTotalGradeDialog(t.row)}}},[e._v("修改")])]}}])})],1)],1)]),e._v(" "),a("el-dialog",{staticStyle:{padding:"0px","text-align":"left"},attrs:{title:e.dialogTitleEdit,"close-on-click-modal":!1,visible:e.editTotalGradeDialogVisible,width:"360px"},on:{"update:visible":function(t){e.editTotalGradeDialogVisible=t}}},[a("el-form",{staticStyle:{"margin-top":"40px",padding:"0px","text-align":"center"},attrs:{model:e.finalGrade}},[a("el-form-item",[a("span",{staticStyle:{"font-size":"17px"}},[e._v("平时成绩：")]),e._v(" "),a("el-input-number",{attrs:{step:.5,min:0,size:"small",max:100,"step-strictly":""},model:{value:e.finalGrade.regular_grade,callback:function(t){e.$set(e.finalGrade,"regular_grade",t)},expression:"finalGrade.regular_grade"}})],1),e._v(" "),a("el-form-item",[a("span",{staticStyle:{"font-size":"17px"}},[e._v("期末成绩：")]),e._v(" "),a("el-input-number",{attrs:{step:.5,min:0,size:"small",max:100,"step-strictly":""},model:{value:e.finalGrade.final_grade,callback:function(t){e.$set(e.finalGrade,"final_grade",t)},expression:"finalGrade.final_grade"}})],1),e._v(" "),a("el-form-item",[a("span",{staticStyle:{"font-size":"17px"}},[e._v("总成绩：")]),e._v(" "),a("el-input-number",{attrs:{step:.5,min:0,size:"small",max:100,"step-strictly":""},model:{value:e.finalGrade.total_grade,callback:function(t){e.$set(e.finalGrade,"total_grade",t)},expression:"finalGrade.total_grade"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.updateTotalGrade()}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var n=a("VU/8")({data:function(){return{multipleSelection:[],keywords:"",currentPage:1,pageSize:10,totalCount:-1,dialogTitle:"",dialogTitleEdit:"",dialogVisible:!1,tableLoading:!1,gradeTableLoading:!1,totalGradeDialogVisible:!1,editTotalGradeDialogVisible:!1,teacherCourses:[],courses:[],teachers:[],finalGrades:[],teachersData:[],coursesData:[],chosenTeacher:[],chosenCourse:[],finalGrade:{user_course_id:"",regular_grade:"",final_grade:"",total_grade:""},myRow:""}},mounted:function(){this.loadteacherCourses(),this.generateTeachersData(),this.generateCoursesData()},methods:{loadteacherCourses:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/office/teacher/course?page="+this.currentPage+"&size="+this.pageSize+"&keywords="+this.keywords).then(function(a){if(e.tableLoading=!1,a&&200==a.status){var i=a.data;t.teacherCourses=i.teacherCourses,t.totalCount=i.count}})},generateTeachersData:function(){this.loadTeachers();var e=[];this.teachers.forEach(function(t,a){e.push({label:t.name+"("+t.username+")",key:t.id})}),this.teachersData=e},generateCoursesData:function(){this.loadCourses();var e=[];this.courses.forEach(function(t,a){e.push({label:t.name+"("+t.course_id+")",key:t.id})}),this.coursesData=e},loadCourses:function(){var e=this;this.getRequest("/config/course").then(function(t){if(t&&200==t.status){var a=t.data;e.courses=a}})},loadTeachers:function(){var e=this;this.getRequest("/office/user/teacher").then(function(t){if(t&&200==t.status){var a=t.data;e.teachers=a}})},showTeacherCourseView:function(){this.generateTeachersData(),this.generateCoursesData(),this.dialogTitle="分配课程",this.dialogVisible=!0},addTeacherCourse:function(){var e=this;this.tableLoading=!0,this.postRequest("/office/teacher/ins",{user_ids:this.chosenTeacher,course_ids:this.chosenCourse}).then(function(t){e.tableLoading=!1,t&&200==t.status&&(e.dialogVisible=!1,e.emptyTeacherCourseData(),e.loadteacherCourses())}),e.tableLoading=!1},loadAllGrade:function(e){var t=this;this.myRow=e,this.dialogTitle="管理 "+e.course.name+"("+e.teacher.name+") 的成绩",this.totalGradeDialogVisible=!0,this.gradeTableLoading=!0,this.getRequest("/office/teacher/getTotalGrade?teacher_course_id="+e.id).then(function(e){if(e&&200==e.status){var a=e.data;t.finalGrades=a,t.gradeTableLoading=!1}})},computeAllGrade:function(){var e=this;this.putRequest("/office/teacher/computeAllGrade",{teacher_course_id:this.myRow.id,user_id:this.myRow.user_id}).then(function(t){t&&200==t.status&&e.loadAllGrade(e.myRow)})},showEditTotalGradeDialog:function(e){this.finalGrade.user_course_id=e.user_course_id,this.dialogTitleEdit="为 "+e.student.name+"("+e.student.username+") 修改总成绩",this.finalGrade.regular_grade=e.regular_grade,this.finalGrade.final_grade=e.final_grade,this.finalGrade.total_grade=e.total_grade,this.editTotalGradeDialogVisible=!0},updateTotalGrade:function(){var e=this;this.putRequest("/office/teacher/Grade/",this.finalGrade).then(function(t){t&&200==t.status&&(e.editTotalGradeDialogVisible=!1,e.loadAllGrade(e.myRow))})},handleSelectionChange:function(e){this.multipleSelection=e},deleteManyteacherCourses:function(){var e=this;this.$confirm("此操作将删除["+this.multipleSelection.length+"]条数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){for(var t="",a=0;a<e.multipleSelection.length;a++)t+=e.multipleSelection[a].id+",";e.doDelete(t)}).catch(function(){})},deleteTeacherCourse:function(e){var t=this;this.$confirm("此操作将永久删除["+e.teacher.name+"的"+e.course.name+"], 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.deleteRequest("/office/teacher/course/"+e).then(function(e){t.tableLoading=!1,e&&200==e.status?(t.currentPage=1,t.loadteacherCourses()):t.$message({type:"error",message:"删除的数据与别的表有关联，删除失败！"})})},keywordsChange:function(e){""==e&&(this.currentPage=1,this.loadteacherCourses())},searchTeacherCourse:function(){this.loadteacherCourses()},handleCurrentChange:function(e){this.currentPage=e,this.loadteacherCourses()},handleSizeChange:function(e){this.pageSize=e,this.currentPage=1,this.loadteacherCourses()},cancelEidt:function(){this.dialogVisible=!1,this.emptyTeacherCourseData()},handleDialogClose:function(e){this.emptyTeacherCourseData(),e()},emptyTeacherCourseData:function(){this.chosenTeacher=[],this.chosenCourse=[]}}},i,!1,function(e){a("LxcQ")},null,null);t.default=n.exports},"0rnk":function(e,t){},DHsN:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={data:function(){var e=this;return{users:[],keywords:"",dialogTitle:"",multipleSelection:[],pageSize:10,totalCount:-1,currentPage:1,dialogVisible:!1,tableLoading:!1,isDisabled:!0,user:{username:"",name:"",password:"",checkPass:""},rules:{username:[{validator:function(e,t,a){if(!t)return a(new Error("请输入用户名"));a()},trigger:"blur"}],name:[{validator:function(e,t,a){if(!t)return a(new Error("请输入姓名"));a()},trigger:"blur"}],password:[{validator:function(t,a,i){0==e.isDisabled&&(""===a||null==a?i(new Error("请输入密码")):e.$refs.addUserForm.validateField("checkPass")),i()},trigger:"blur"}],checkPass:[{validator:function(t,a,i){0==e.isDisabled&&(""===a||null==a?i(new Error("请再次输入密码")):a!==e.user.password?i(new Error("两次输入密码不一致!")):i()),i()},trigger:"blur"}]},options:[],value:""}},mounted:function(){this.loadUsers(),this.loadRoles()},methods:{loadRoles:function(){var e=this;this.getRequest("/system/basic/roles").then(function(t){if(t&&200==t.status){var a=t.data;e.options=a}})},loadUsers:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/office/user/user?page="+this.currentPage+"&size="+this.pageSize+"&keywords="+this.keywords).then(function(a){if(e.tableLoading=!1,a&&200==a.status){var i=a.data;t.users=i.users,t.totalCount=i.count}})},showEditUserView:function(e){this.isDisabled=!1,this.dialogTitle="编辑用户",this.user.id=e.id,this.user.username=e.username,this.user.name=e.name,this.value=e.roles[0].id,this.dialogVisible=!0},showAddUserView:function(){this.isDisabled=!0,this.dialogTitle="添加用户",this.dialogVisible=!0},addUser:function(e){var t=this,a=this;this.tableLoading=!0,this.user.id?""==this.user.password&&""==this.user.checkPass||null==this.user.password&&null==this.user.checkPass?this.putRequest("/office/user/?role_id="+this.value,this.user).then(function(e){a.tableLoading=!1,e&&200==e.status&&(a.dialogVisible=!1,a.emptyUserData(),a.loadUsers())}):this.$refs[e].validate(function(e){e&&t.putRequest("/office/user/?role_id="+t.value,t.user).then(function(e){a.tableLoading=!1,e&&200==e.status&&(a.dialogVisible=!1,a.emptyUserData(),a.loadUsers())})}):this.$refs[e].validate(function(e){e&&t.postRequest("/office/user/user/reg?role_id="+t.value,t.user).then(function(e){a.tableLoading=!1,e&&200==e.status&&(a.dialogVisible=!1,a.emptyUserData(),a.loadUsers())})}),a.tableLoading=!1},handleSelectionChange:function(e){this.multipleSelection=e},deleteManyUsers:function(){var e=this;this.$confirm("此操作将删除["+this.multipleSelection.length+"]条数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){for(var t="",a=0;a<e.multipleSelection.length;a++)t+=e.multipleSelection[a].id+",";e.doDelete(t)}).catch(function(){})},deleteUser:function(e){var t=this;this.$confirm("此操作将永久删除["+e.name+"], 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.deleteRequest("/office/user/user/"+e).then(function(e){t.tableLoading=!1,e&&200==e.status?(t.currentPage=1,t.loadUsers()):t.$message({type:"error",message:"删除的数据与别的表有关联，删除失败！"})})},keywordsChange:function(e){""==e&&(this.currentPage=1,this.loadUsers())},searchUser:function(){this.loadUsers()},handleCurrentChange:function(e){this.currentPage=e,this.loadUsers()},handleSizeChange:function(e){this.pageSize=e,this.currentPage=1,this.loadUsers()},cancelEidt:function(e){this.dialogVisible=!1,this.emptyUserData(),this.$refs.addUserForm.clearValidate()},handleDialogClose:function(e){this.emptyUserData(),this.$refs.addUserForm.clearValidate(),e()},emptyUserData:function(){this.user={username:"",name:"",password:"",checkPass:""},this.value=""}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-container",[a("el-header",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[a("div",{staticStyle:{display:"inline"}},[a("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"请输入姓名",clearable:"",size:"small","prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchUser(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:e.searchUser}},[e._v("搜索")])],1),e._v(" "),a("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:e.showAddUserView}},[e._v("添加用户")])],1)]),e._v(" "),a("el-main",{staticStyle:{"padding-left":"0px","padding-top":"0px"}},[a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.users,border:"",resizable:"",stripe:"",size:"medium"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"index",align:"center",label:" ",width:"38"}}),e._v(" "),a("el-table-column",{attrs:{type:"selection",align:"center",width:"40"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",align:"left","show-overflow-tooltip":"",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"username",align:"left","show-overflow-tooltip":"",label:"用户名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"roles[0].nameZh",align:"left","show-overflow-tooltip":"",label:"角色"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",align:"center",width:"150","show-overflow-tooltip":"",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"warning",icon:"el-icon-edit",size:"mini"},on:{click:function(a){return e.showEditUserView(t.row)}}},[e._v("修改")]),e._v(" "),a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(a){return e.deleteUser(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"space-between","margin-top":"10px"}},[e.users.length>0?a("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",disabled:0==e.multipleSelection.length},on:{click:e.deleteManyUsers}},[e._v("批量删除")]):e._e(),e._v(" "),a("el-pagination",{attrs:{background:"","page-size":e.pageSize,"page-sizes":[10,5,20,30],"current-page":e.currentPage,layout:"total, prev, pager, next, sizes, jumper",total:e.totalCount},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1)],1)])],1),e._v(" "),a("el-dialog",{staticStyle:{padding:"0px","text-align":"left"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogVisible,"before-close":e.handleDialogClose,width:"500px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"addUserForm",staticStyle:{margin:"0px",padding:"0px"},attrs:{model:e.user,rules:e.rules}},[a("el-form-item",{attrs:{label:"用户名:",prop:"username"}},[a("el-input",{attrs:{"prefix-icon":"el-icon-edit",type:"text",clearable:"",placeholder:"请输入用户名"},model:{value:e.user.username,callback:function(t){e.$set(e.user,"username","string"==typeof t?t.trim():t)},expression:"user.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"姓名:",prop:"name"}},[a("el-input",{attrs:{"prefix-icon":"el-icon-edit",clearable:"",placeholder:"请输入姓名"},model:{value:e.user.name,callback:function(t){e.$set(e.user,"name","string"==typeof t?t.trim():t)},expression:"user.name"}})],1),e._v(" "),a("el-form-item",{staticStyle:{"padding-top":"20px"},attrs:{prop:"role"}},[a("el-select",{attrs:{placeholder:"请选择角色"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,function(e){return a("el-option",{key:e.id,attrs:{label:e.nameZh,value:e.id,disabled:e.id<3}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{type:"password",disabled:e.isDisabled,placeholder:"请输入密码",clearable:"","show-password":""},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password","string"==typeof t?t.trim():t)},expression:"user.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"确认密码",prop:"checkPass"}},[a("el-input",{attrs:{type:"password",disabled:e.isDisabled,placeholder:"请再次输入密码",clearable:"","show-password":""},model:{value:e.user.checkPass,callback:function(t){e.$set(e.user,"checkPass","string"==typeof t?t.trim():t)},expression:"user.checkPass"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.cancelEidt("addUserForm")}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.addUser("addUserForm")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var o=a("VU/8")(i,n,!1,function(e){a("w1ZE")},null,null);t.default=o.exports},LxcQ:function(e,t){},"WF/C":function(e,t,a){var i={"./OffCourse.vue":"azQG","./OffStudentCourse.vue":"eNjh","./OffTeacher.vue":"08hK","./OffUser.vue":"DHsN"};function n(e){return a(o(e))}function o(e){var t=i[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}n.keys=function(){return Object.keys(i)},n.resolve=o,e.exports=n,n.id="WF/C"},azQG:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={data:function(){return{courses:[],keywords:"",dialogTitle:"",multipleSelection:[],pageSize:10,totalCount:-1,currentPage:1,dialogVisible:!1,tableLoading:!1,course:{course_id:"",name:"",isExam:1,proportion:.5,introduction:""},rules:{course_id:[{validator:function(e,t,a){if(!t)return a(new Error("请输入课程代码"));a()},trigger:"blur"}],name:[{validator:function(e,t,a){if(!t)return a(new Error("请输入课程名称"));a()},trigger:"blur"}]}}},mounted:function(){this.loadCourses()},methods:{loadCourses:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/office/course/course?page="+this.currentPage+"&size="+this.pageSize+"&keywords="+this.keywords).then(function(a){if(e.tableLoading=!1,a&&200==a.status){var i=a.data;t.courses=i.courses,t.totalCount=i.count}})},showEditCourseView:function(e){this.dialogTitle="编辑课程",this.course=e,this.dialogVisible=!0},showAddCourseView:function(){this.dialogTitle="添加课程",this.course.isExam=1,this.dialogVisible=!0},addCourse:function(e){var t=this,a=this;this.tableLoading=!0,this.$refs[e].validate(function(e){e&&(t.course.id?t.putRequest("/office/course/",t.course).then(function(e){a.tableLoading=!1,e&&200==e.status&&(a.dialogVisible=!1,a.emptyCourseData(),a.loadCourses())}):t.postRequest("/office/course/course/ins",t.course).then(function(e){a.tableLoading=!1,e&&200==e.status&&(a.dialogVisible=!1,a.emptyCourseData(),a.loadCourses())}))}),a.tableLoading=!1},handleSelectionChange:function(e){this.multipleSelection=e},deleteManyCourses:function(){var e=this;this.$confirm("此操作将删除["+this.multipleSelection.length+"]条数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){for(var t="",a=0;a<e.multipleSelection.length;a++)t+=e.multipleSelection[a].id+",";e.doDelete(t)}).catch(function(){})},deleteCourse:function(e){var t=this;this.$confirm("此操作将永久删除["+e.name+"], 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.deleteRequest("/office/course/course/"+e).then(function(e){t.tableLoading=!1,e&&200==e.status?(t.currentPage=1,t.loadCourses()):t.$message({type:"error",message:"删除的数据与别的表有关联，删除失败！"})})},keywordsChange:function(e){""==e&&(this.currentPage=1,this.loadCourses())},searchCourse:function(){this.loadCourses()},handleCurrentChange:function(e){this.currentPage=e,this.loadCourses()},handleSizeChange:function(e){this.pageSize=e,this.currentPage=1,this.loadCourses()},cancelEidt:function(e){this.dialogVisible=!1,this.emptyCourseData(),this.$refs.addCourseForm.clearValidate()},handleDialogClose:function(e){this.emptyCourseData(),this.$refs.addCourseForm.clearValidate(),e()},emptyCourseData:function(){this.course={course_id:"",name:"",isExam:1,proportion:.5,introduction:""}}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-container",[a("el-header",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[a("div",{staticStyle:{display:"inline"}},[a("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"请输入课程名",clearable:"",size:"small","prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchCourse(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:e.searchCourse}},[e._v("搜索")])],1),e._v(" "),a("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:e.showAddCourseView}},[e._v("添加课程")])],1)]),e._v(" "),a("el-main",{staticStyle:{"padding-left":"0px","padding-top":"0px"}},[a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.courses,border:"",resizable:"",stripe:"",size:"medium"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"index",align:"center",label:" ",width:"38"}}),e._v(" "),a("el-table-column",{attrs:{type:"selection",align:"center",width:"40"}}),e._v(" "),a("el-table-column",{attrs:{prop:"course_id",width:"120px",align:"left","show-overflow-tooltip":"",label:"课程代码"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",width:"160px","show-overflow-tooltip":"",align:"left",label:"课程名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"isExam",width:"80px","show-overflow-tooltip":"",align:"left",label:"考核方式"},scopedSlots:e._u([{key:"default",fn:function(t){return["1"==t.row.isExam?a("p",[e._v("\n                      考试\n                  ")]):"0"==t.row.isExam?a("p",[e._v("\n                      考查\n                  ")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"proportion",width:"110px",align:"left","show-overflow-tooltip":"",label:"平时成绩占比"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v("\n                      "+e._s(100*t.row.proportion)+"%\n                  ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"introduction",align:"left","show-overflow-tooltip":"",label:"课程介绍"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",align:"center",width:"150","show-overflow-tooltip":"",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"warning",icon:"el-icon-edit",size:"mini"},on:{click:function(a){return e.showEditCourseView(t.row)}}},[e._v("修改")]),e._v(" "),a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(a){return e.deleteCourse(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"space-between","margin-top":"10px"}},[e.courses.length>0?a("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",disabled:0==e.multipleSelection.length},on:{click:e.deleteManyCourses}},[e._v("批量删除")]):e._e(),e._v(" "),a("el-pagination",{attrs:{background:"","page-size":e.pageSize,"page-sizes":[10,5,20,30],"current-page":e.currentPage,layout:"total, prev, pager, next, sizes, jumper",total:e.totalCount},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1)],1)])],1),e._v(" "),a("el-dialog",{staticStyle:{padding:"0px","text-align":"left"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogVisible,"before-close":e.handleDialogClose,width:"500px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"addCourseForm",staticStyle:{margin:"0px",padding:"0px"},attrs:{model:e.course,rules:e.rules}},[a("el-form-item",{attrs:{label:"课程代码:",prop:"course_id"}},[a("el-input",{attrs:{"prefix-icon":"el-icon-edit",type:"text",clearable:"",placeholder:"请输入课程代码"},model:{value:e.course.course_id,callback:function(t){e.$set(e.course,"course_id","string"==typeof t?t.trim():t)},expression:"course.course_id"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"课程名称:",prop:"name"}},[a("el-input",{attrs:{"prefix-icon":"el-icon-edit",clearable:"",type:"text",placeholder:"请输入课程名称"},model:{value:e.course.name,callback:function(t){e.$set(e.course,"name","string"==typeof t?t.trim():t)},expression:"course.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"考核方式:",prop:"isExam"}},[a("el-switch",{staticStyle:{"margin-top":"50px","margin-left":"-72px"},attrs:{"active-text":"考试","inactive-text":"考查","active-value":1,"inactive-value":0},model:{value:e.course.isExam,callback:function(t){e.$set(e.course,"isExam",t)},expression:"course.isExam"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"平时成绩占比:",prop:"proportion"}},[a("el-slider",{staticStyle:{"margin-top":"50px"},attrs:{step:.1,max:"1","show-input":"","show-stops":""},model:{value:e.course.proportion,callback:function(t){e.$set(e.course,"proportion",t)},expression:"course.proportion"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"课程简介:",prop:"introduction"}},[a("el-input",{attrs:{clearable:"",autosize:"true",type:"textarea",placeholder:"请输入课程简介"},model:{value:e.course.introduction,callback:function(t){e.$set(e.course,"introduction",t)},expression:"course.introduction"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.cancelEidt("addCourseForm")}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.addCourse("addCourseForm")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var o=a("VU/8")(i,n,!1,function(e){a("0rnk")},null,null);t.default=o.exports},eNjh:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-container",[a("el-header",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[a("div",{staticStyle:{display:"inline"}},[a("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"请输入课程名或学生姓名或教师姓名",clearable:"",size:"small","prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchStudentCourse(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:e.searchStudentCourse}},[e._v("搜索")])],1),e._v(" "),a("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:e.showStudentCourseView}},[e._v("分配课程")])],1)]),e._v(" "),a("el-main",{staticStyle:{"padding-left":"0px","padding-top":"0px"}},[a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.studentCourses,border:"",resizable:"",stripe:"",size:"medium"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"index",align:"center",label:" ",width:"38"}}),e._v(" "),a("el-table-column",{attrs:{type:"selection",align:"center",width:"40"}}),e._v(" "),a("el-table-column",{attrs:{prop:"teacherCourse.course.course_id",align:"left",label:"课程代码","show-overflow-tooltip":"",width:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"teacherCourse.course.name",width:"",align:"left",label:"课程名称","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"student.name",width:"",align:"left","show-overflow-tooltip":"",label:"学生姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"student.username",align:"left",label:"学生用户名","show-overflow-tooltip":"",width:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"teacherCourse.teacher.name",width:"",align:"left","show-overflow-tooltip":"",label:"老师姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"teacherCourse.teacher.username",width:"",align:"left","show-overflow-tooltip":"",label:"老师用户名"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center",width:"150","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(a){return e.deleteStudentCourse(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"space-between",margin:"2px"}},[e.studentCourses.length>0?a("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",disabled:0==e.multipleSelection.length},on:{click:e.deleteManyStudentCourses}},[e._v("批量删除")]):e._e(),e._v(" "),a("el-pagination",{attrs:{background:"","page-size":e.pageSize,"page-sizes":[10,5,20,30],"current-page":e.currentPage,layout:"total, prev, pager, next, sizes, jumper",total:e.totalCount},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1)],1)])],1),e._v(" "),a("el-dialog",{staticStyle:{padding:"0px","text-align":"left"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogVisible,"before-close":e.handleDialogClose,width:"1000px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-transfer",{staticStyle:{"margin-bottom":"20px"},attrs:{data:e.studentsData,titles:["学生列表","分配列表"],"target-order":"push"},model:{value:e.chosenStudent,callback:function(t){e.chosenStudent=t},expression:"chosenStudent"}}),e._v(" "),a("el-transfer",{staticStyle:{"margin-bottom":"20px"},attrs:{data:e.coursesData,titles:["课程列表","分配列表"],"target-order":"push"},model:{value:e.chosenCourse,callback:function(t){e.chosenCourse=t},expression:"chosenCourse"}}),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.cancelEidt()}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.addStudentCourse()}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var n=a("VU/8")({data:function(){return{multipleSelection:[],keywords:"",currentPage:1,pageSize:10,totalCount:-1,dialogTitle:"",dialogVisible:!1,tableLoading:!1,studentCourses:[],courses:[],students:[],studentsData:[],coursesData:[],chosenStudent:[],chosenCourse:[]}},mounted:function(){this.loadStudentCourses(),this.generateStudentsData(),this.generateCoursesData()},methods:{loadStudentCourses:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/studentcourse/sc?page="+this.currentPage+"&size="+this.pageSize+"&keywords="+this.keywords).then(function(a){if(e.tableLoading=!1,a&&200==a.status){var i=a.data;t.studentCourses=i.studentcourses,t.totalCount=i.count}})},generateStudentsData:function(){this.loadStudents();var e=[];this.students.forEach(function(t,a){e.push({label:t.name+"("+t.username+")",key:t.id})}),this.studentsData=e},generateCoursesData:function(){this.loadCourses();var e=[];this.courses.forEach(function(t,a){e.push({label:"《"+t.course.name+"("+t.course.course_id+")》"+t.teacher.name+"("+t.teacher.username+")",key:t.id})}),this.coursesData=e},loadCourses:function(){var e=this;this.getRequest("/office/teacher/teacherCourse").then(function(t){if(t&&200==t.status){var a=t.data;e.courses=a}})},loadStudents:function(){var e=this;this.getRequest("/office/user/student").then(function(t){if(t&&200==t.status){var a=t.data;e.students=a}})},showStudentCourseView:function(){this.generateStudentsData(),this.generateCoursesData(),this.dialogTitle="分配课程",this.dialogVisible=!0},addStudentCourse:function(){var e=this;this.tableLoading=!0,this.postRequest("/studentcourse/ins",{user_ids:this.chosenStudent,teacher_course_ids:this.chosenCourse}).then(function(t){e.tableLoading=!1,t&&200==t.status&&(e.dialogVisible=!1,e.emptyStudentCourseData(),e.loadStudentCourses())}),e.tableLoading=!1},handleSelectionChange:function(e){this.multipleSelection=e},deleteManyStudentCourses:function(){var e=this;this.$confirm("此操作将删除["+this.multipleSelection.length+"]条数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){for(var t="",a=0;a<e.multipleSelection.length;a++)t+=e.multipleSelection[a].id+",";e.doDelete(t)}).catch(function(){})},deleteStudentCourse:function(e){var t=this;this.$confirm("此操作将永久删除["+e.name+"], 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.deleteRequest("/studentcourse/sc/"+e).then(function(e){t.tableLoading=!1,e&&200==e.status?(t.currentPage=1,t.loadStudentCourses()):t.$message({type:"error",message:"删除的数据与别的表有关联，删除失败！"})})},keywordsChange:function(e){""==e&&(this.currentPage=1,this.loadStudentCourses())},searchStudentCourse:function(){this.loadStudentCourses()},handleCurrentChange:function(e){this.currentPage=e,this.loadStudentCourses()},handleSizeChange:function(e){this.pageSize=e,this.currentPage=1,this.loadStudentCourses()},cancelEidt:function(){this.dialogVisible=!1,this.emptyStudentCourseData()},handleDialogClose:function(e){this.emptyStudentCourseData(),e()},emptyStudentCourseData:function(){this.chosenStudent=[],this.chosenCourse=[]}}},i,!1,function(e){a("kDrl")},null,null);t.default=n.exports},kDrl:function(e,t){},w1ZE:function(e,t){}});
//# sourceMappingURL=2.db090e02affe5c66fbd3.js.map